<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz SpÃ©cial Pour Toi ðŸ’œ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(circle, #0f0f0f 0%, #000000 100%);
            color: #ffffff;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; margin: 0; overflow: hidden;
            position: relative;
        }

        /* PARILTI KANVASI STÄ°LÄ° */
        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
        }

        #password-screen {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            padding: 40px; border-radius: 30px;
            box-shadow: 0 0 40px rgba(135, 206, 235, 0.3);
            width: 90%; max-width: 400px; text-align: center;
            border: 1.5px solid rgba(135, 206, 235, 0.4);
            z-index: 100; position: relative;
        }

        .photo-heart {
            position: absolute; bottom: -150px; width: 90px; height: 90px;
            background-size: cover; background-position: center; background-repeat: no-repeat;
            clip-path: path('M45 83L40.1 78.5C14.1 54.9 0 42.1 0 26.5C0 13.8 10 3.7 22.7 3.7C29.9 3.7 36.8 7.1 41.2 12.4C45.6 7.1 52.5 3.7 59.7 3.7C72.4 3.7 82.4 13.8 82.4 26.5C82.4 42.1 68.3 54.9 42.3 78.5L45 83Z');
            filter: drop-shadow(0 0 10px rgba(135, 206, 235, 0.7));
            border: 1px solid rgba(135, 206, 235, 0.4);
            animation: floatUp 11s linear infinite;
            z-index: 1; opacity: 0;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.6) rotate(-5deg); opacity: 0; }
            15% { opacity: 0.9; transform: translateY(-20vh) scale(1) rotate(0deg); }
            85% { opacity: 0.9; }
            100% { transform: translateY(-130vh) scale(1.1) rotate(15deg); opacity: 0; }
        }

        #quiz-container {
            display: none;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 30px; border-radius: 30px;
            box-shadow: 0 0 40px rgba(135, 206, 235, 0.3);
            width: 90%; max-width: 450px; text-align: center;
            border: 1.5px solid rgba(135, 206, 235, 0.4);
            z-index: 10; position: relative;
        }

        h2 { color: #87ceeb; font-size: 1.3rem; margin-bottom: 25px; text-shadow: 0 0 10px rgba(135, 206, 235, 0.5); }

        .option-btn, #pass-btn {
            display: block; width: 100%; padding: 15px; margin: 10px 0;
            border: 1.5px solid #87ceeb; border-radius: 12px;
            background: transparent; color: #87ceeb;
            cursor: pointer; transition: 0.3s; font-weight: bold; font-size: 1rem;
        }

        .option-btn:hover, #pass-btn:hover { background: #87ceeb; color: #000000; box-shadow: 0 0 20px rgba(135, 206, 235, 0.8); }

        input {
            width: 85%; padding: 15px; border-radius: 12px; border: 2px solid #87ceeb;
            background: #000000; color: #87ceeb; text-align: center; margin-bottom: 20px; outline: none;
        }

        #action-btn {
            padding: 15px 35px; border: none; border-radius: 12px;
            background: #87ceeb; color: #000000; font-weight: bold; cursor: pointer;
        }

        .score-display { font-size: 4rem; color: #87ceeb; font-weight: 900; text-shadow: 0 0 20px #87ceeb; margin: 10px 0; }
        .roblox-message { font-size: 1.1rem; color: #ffffff; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div id="password-screen">
    <h2 style="color:#87ceeb;">Mot de Passe ðŸ’œ</h2>
    <p>Entrez le code pour commencer...</p>
    <input type="password" id="pass-input" placeholder="****">
    <button id="pass-btn" onclick="checkPassword()">Entrer</button>
    <p id="pass-error" style="color: #ff4d4d; font-size: 0.9rem; margin-top: 10px;"></p>
</div>

<div id="quiz-container">
    <div id="quiz-content">
        <h2 id="question-text">Chargement...</h2>
        <div id="content-area"></div>
        <p id="feedback"></p>
    </div>
</div>

<audio id="snd-correct" src="correct.m4a"></audio>
<audio id="snd-wrong" src="wrong.m4a"></audio>
<audio id="snd-voice" src="tebrik.m4a"></audio>
<audio id="snd-final" src="sonsoz.m4a"></audio>

<script>
    const correctPassword = "Erxx"; 
    const images = [];
    for(let i = 1; i <= 20; i++) { images.push(`resim${i}.jpg`); }
    
    let userWrittenAnswers = [];

    // --- PARILTI SÄ°STEMÄ° BAÅžLANGIÃ‡ ---
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];

    function initCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', initCanvas);
    initCanvas();

    class Particle {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 2 + 0.1;
            this.speedX = Math.random() * 0.5 - 0.25;
            this.speedY = Math.random() * 0.5 - 0.25;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
            if (this.x > canvas.width) this.x = 0;
            if (this.x < 0) this.x = canvas.width;
            if (this.y > canvas.height) this.y = 0;
            if (this.y < 0) this.y = canvas.height;
        }
        draw() {
            ctx.fillStyle = 'rgba(135, 206, 235, 0.4)';
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    for (let i = 0; i < 100; i++) { particles.push(new Particle()); }

    function animateBG() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animateBG);
    }
    animateBG();
    // --- PARILTI SÄ°STEMÄ° BÄ°TÄ°Åž ---

    function createPhotoHearts() {
        const heart = document.createElement('div');
        heart.classList.add('photo-heart');
        const randomImg = images[Math.floor(Math.random() * images.length)];
        heart.style.backgroundImage = `url(${randomImg})`;
        heart.style.left = Math.random() * 95 + 'vw';
        heart.style.animationDuration = (Math.random() * 3 + 9) + 's';
        document.body.appendChild(heart);
        setTimeout(() => { heart.remove(); }, 12000);
    }

    function checkPassword() {
        const input = document.getElementById('pass-input').value;
        if(input === correctPassword) {
            document.getElementById('password-screen').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            setInterval(createPhotoHearts, 900);
            render();
        } else {
            document.getElementById('pass-error').innerText = "Code incorrect ! RÃ©essaie mon cÅ“ur ðŸ’œ";
        }
    }

    const questions = [
        { q: "Dans quel jeu nous sommes-nous rencontrÃ©s ?", type: "choice", opts: ["Roblox", "Evade", "Boule de lame", "99 Nuits"], ans: "Evade" },
        { q: "Si nous avions une fille, quel prÃ©nom choisirais-je ?", type: "choice", opts: ["Ayca", "Alya", "Alisa", "Ayla"], ans: "Alya" },
        { q: "Dans quel ordre souhaiterais-je que nos enfants naissent ?", type: "choice", opts: ["Boy-Boy-Girl", "Girl-Boy-Girl", "Boy-Girl-Boy", "Girl-Girl-Boy"], ans: "Boy-Girl-Boy" },
        { q: "Combien d'enfants est-ce que je voulais ?", type: "choice", opts: ["1", "2", "3", "4"], ans: "3" },
        { q: "Est-ce que je voulais que notre premier enfant soit un garÃ§on ou une fille ?", type: "choice", opts: ["Boy", "Girl"], ans: "Boy" },
        { q: "Quelle est ma colour prÃ©fÃ©rÃ©e ?", type: "choice", opts: ["Bleu", "Rouge", "Violet", "Noir"], ans: "Violet" },
        { q: "Quel animal est-ce que je dÃ©teste le plus ?", type: "choice", opts: ["Serpent", "AraignÃ©e", "Moustique", "Cafard"], ans: "Moustique" },
        { q: "Quelle est ta caractÃ©ristique physique prÃ©fÃ©rÃ©e chez moi ?", type: "blank" },
        { q: "Quel est le mot que j'utilise le plus avec toi ?", type: "blank" },
        { q: "Quel animal de compagnie est-ce que je voudrais ?", type: "choice", opts: ["Chien", "Chat", "Hamster", "Perroquet"], ans: "Chat" },
        { q: "Quel est mon dessert prÃ©fÃ©rÃ© ?", type: "choice", opts: ["CrÃªpe", "Glace", "Chocolat", "Tous les desserts au lait"], ans: "Tous les desserts au lait" },
        { q: "Quel temps est-ce que j'aime le plus ?", type: "choice", opts: ["Pluvieux", "Chaud", "Pluie tiÃ¨de", "Temps de neige ensoleillÃ©"], ans: "Pluie tiÃ¨de" },
        { q: "Quelle est ma taille ?", type: "choice", opts: ["1.70", "1.74", "1.75", "1.73"], ans: "1.74" },
        { q: "Combien de cm ?", type: "choice", opts: ["14cm", "15cm", "14.5cm", "13.5cm"], ans: "15cm" },
        { q: "Quelle est l'Ã©paisseur du mien ?", type: "choice", opts: ["3cm", "4cm", "3.5cm", "5cm"], ans: "4cm" },
        { q: "Quel genre de musique est-ce que je prÃ©fÃ¨re ?", type: "choice", opts: ["Phunk", "Calme et Paisible", "Funk", "Rep"], ans: "Calme et Paisible" },
        { q: "Quelle sera la premiÃ¨re chose que vous ferez pour moi lorsque nous nous rencontrerons ?", type: "blank" },
        { q: "Que ferais-tu en premier au lit avec moi ?", type: "blank" },
        { q: "Ã€ ton avis, Ã  quel point je t'aime ?", type: "final" }
    ];

    let current = 0; let correctPoints = 0; let firstTry = true;

    function render() {
        if (current >= questions.length) return;
        const q = questions[current];
        document.getElementById('question-text').innerText = q.q;
        const area = document.getElementById('content-area');
        area.innerHTML = ""; document.getElementById('feedback').innerText = "";

        if (q.type === "choice") {
            q.opts.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "option-btn"; btn.innerText = opt;
                btn.onclick = () => {
                    if (opt === q.ans) {
                        document.getElementById('snd-correct').play();
                        confetti({ colors: ['#87ceeb', '#ffffff'] });
                        if(firstTry) correctPoints++;
                        current++; firstTry = true; setTimeout(render, 1000);
                    } else {
                        document.getElementById('snd-wrong').play();
                        document.getElementById('feedback').innerText = "Mauvaise rÃ©ponse ! RÃ©essaie mon cÅ“ur ðŸ’œ";
                        firstTry = false;
                    }
                };
                area.appendChild(btn);
            });
        } else {
            const input = document.createElement('input');
            input.type = "text"; input.id = "user-input"; input.placeholder = "Ã‰cris ta rÃ©ponse...";
            const btn = document.createElement('button');
            btn.id = "action-btn"; btn.innerText = "Tu es sÃ»r(e) ?";
            btn.onclick = () => {
                const val = document.getElementById('user-input').value.trim();
                if(val === "") return;
                userWrittenAnswers.push(`${questions[current].q}: ${val}`);
                correctPoints++;
                if (questions[current].type === "final") { finishQuiz(); }
                else { document.getElementById('snd-voice').play(); current++; setTimeout(render, 1200); }
            };
            area.appendChild(input); area.appendChild(document.createElement('br')); area.appendChild(btn);
        }
    }

    function finishQuiz() {
        const score = Math.round((correctPoints / questions.length) * 100);
        document.getElementById('snd-final').play();
        confetti({ particleCount: 300, spread: 100, colors: ['#87ceeb', '#ffffff'] });
        
        const myNumber = "905466775323"; 

        let answersText = "\n\n--- RÃ©ponses ---";
        userWrittenAnswers.forEach(item => {
            answersText += `\n- ${item}`;
        });

        const fullMessage = `Askuuum, testi %${score} puanla bitirdim! ðŸ’œ${answersText}`;
        const whatsappURL = `https://api.whatsapp.com/send?phone=${myNumber}&text=${encodeURIComponent(fullMessage)}`;

        document.getElementById('quiz-content').innerHTML = `
            <h2>Quiz TerminÃ© ðŸ’œ</h2>
            <div class="score-display">${score}%</div>
            <p style="color:#87ceeb; font-weight:bold; font-size: 1.1rem;">Elisa, merci d'avoir pris le temps de faire ce petit test. Chaque jour passÃ© avec toi est un cadeau. J'espÃ¨re que nous continuerons Ã  vivre ensemble. Je t'aime beaucoup !</p>
            <div class="roblox-message">Regardez nos avatars sur Roblox, ils sont trop mignons !</div>
            <br>
            <a href="${whatsappURL}" style="text-decoration: none;">
                <button class="option-btn" style="background:#25D366; color:white; border:none; box-shadow: 0 4px 15px rgba(37,211,102,0.4);">
                    Envoie-moi tes rÃ©ponses ðŸ“±
                </button>
            </a>
        `;
    }
</script>
</body>
</html>


